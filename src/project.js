require=function s(a,c,r){function h(e,t){if(!c[e]){if(!a[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(l)return l(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var o=c[e]={exports:{}};a[e][0].call(o.exports,function(t){return h(a[e][1][t]||t)},o,o.exports,s,a,c,r)}return c[e].exports}for(var l="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({game:[function(t,e,n){"use strict";cc._RF.push(e,"8ca88LIBzFH25mfQzhOuT1q","game"),cc.Class({extends:cc.Component,properties:{status:0,isShow:0,pointPrefab:{default:null,type:cc.Prefab},linePrefab:{default:null,type:cc.Prefab},myParticlePrefab:{default:null,type:cc.Prefab},myParticle:null,points:[],lines:[],values:[],op:[],change:[],scale:1,path:null,line_count:0},onLoad:function(){},start:function(){},drawPointFollowNet:function(){this.points=[];var t,e=this.node.width,n=this.node.height,i=this.values.length,o=Math.ceil(Math.sqrt(i)),s=n-40,a=1;s<(t=cc.instantiate(this.pointPrefab)).height*o*2&&(a=.9*Math.sqrt(s/(t.height*o*2)),this.scale=a);var c,r=a*t.height*2,h=-e/2+200+a*t.height*.5,l=n/2-20-a*t.height*.5,p=[0,-1],u=[0,1],d=[1,0],f=[-1,0];c=o%2==0?o:o+1;var g,m=0;for(g=0;g<c&&m<i;g++,m++)t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),g!=c-1&&(h+=d[0]*r,l+=d[1]*r),this.points.push(t);for(g=0;g<o-1&&m<i;g++,m++)h+=p[0]*r,l+=p[1]*r,t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),this.points.push(t);for(;m<i;){for(m<i&&(h+=f[0]*r,l+=f[1]*r,t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),this.points.push(t),m++),g=0;g<o-2&&m<i;g++,m++)h+=u[0]*r,l+=u[1]*r,t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),this.points.push(t);for(m<i&&(h+=f[0]*r,l+=f[1]*r,t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),this.points.push(t),m++),g=0;g<o-2&&m<i;g++,m++)h+=p[0]*r,l+=p[1]*r,t=cc.instantiate(this.pointPrefab),this.node.addChild(t),t.setPosition(h,l),t.setScale(a),this.points.push(t)}for(g=0;g<this.points.length;g++)this.points[g].zIndex=10,this.points[g].getComponent("point").setValue(this.values[g])},drawPointFollowCircle:function(){this.points=[];for(var t,e,n=.25*this.getComponent(cc.Canvas).designResolution.width,i=this.values,o=this.values.length,s=0;s<o;s++)t=cc.instantiate(this.pointPrefab),this.node.addChild(t),this.points.push(t),t.zIndex=20,(e=t.getComponent("point")).drawByXY(n*Math.sin(2*s*Math.PI/o),n*Math.cos(2*s*Math.PI/o)),e.setValue(i[s])},drawLine:function(){for(var t,e,n=this.points,i=this.lines,o=this.op.length,s=this.op,a=0;a<o;a++)(t=cc.instantiate(this.linePrefab)).height*=this.scale,this.node.addChild(t),i.push(t),(e=t.getComponent("line")).setRelatePoint(n[(a-1+o)%o],n[a]),e.setOp(s[a]),e.game=this},relatePL:function(){var t=this.points.length,e=this.lines.length,n=this.points,i=this.lines;if(0==t||0==e||t!=e)return console.log("opreator can't match with value,those count not equals"),0;for(var o=0;o<t;o++)n[o].getComponent("point").relateLine[0]=i[o],n[o].getComponent("point").relateLine[1]=i[(o+1)%e]},_createNewPoint:function(t,e){var n;this.values,this.lines,this.points;return n=cc.instantiate(this.pointPrefab),this.node.addChild(n),n.zIndex=20,n.setScale(this.scale),n.getComponent("point").drawByXY(t,e),n},processOp:function(s){var a=s.getComponent("line"),c=a.relatePoint[0].getComponent("point"),r=a.relatePoint[1].getComponent("point");if(0==this.status){this.isShow&&(s.getComponent("line").stopShow(),this.path.i<this.path.pA.length-1?this.lines[this.path.pA[++this.path.i]].getComponent("line").startShow():this.path.i++),this.status=1,c.relateLine[1]=null,r.relateLine[0]=null;var t={isFirst:1,p0:a.relatePoint[0],p1:a.relatePoint[1],clickedLine:s};this.change.push(t)}else 1==this.status&&(this.isShow&&(s.getComponent("line").stopShow(),this.path.i<this.path.pA.length-1?this.lines[this.path.pA[++this.path.i]].getComponent("line").startShow():this.path.i++),a.relatePoint[0].getComponent("point").prePos=a.relatePoint[0].getPosition(),a.relatePoint[1].getComponent("point").prePos=a.relatePoint[1].getPosition(),a.relatePoint[0].runAction(new cc.sequence(new cc.moveTo(.3,s.getPosition()),new cc.callFunc(function(){this.myParticle.setPosition(s.getPosition()),this.myParticle.getComponent(cc.ParticleSystem).resetSystem()},this))),a.relatePoint[1].runAction(new cc.sequence(new cc.moveTo(.3,s.getPosition()),new cc.callFunc(function(){a.relatePoint[0].active=!1,a.relatePoint[1].active=!1;var t,e,n=this._createNewPoint(s.x,s.y),i=n.getComponent("point");0==a.op?i.setValue(c.val+r.val):1==a.op&&i.setValue(c.val*r.val),t=c.relateLine[0],e=r.relateLine[1];var o={p0:a.relatePoint[0],p1:a.relatePoint[1],clickedLine:s,p0Line:null,p1Line:null,newPoint:n};t&&(t.getComponent("line").relatePoint[1]=n,i.relateLine[0]=t,o.p0Line=t),e&&(e.getComponent("line").relatePoint[0]=n,i.relateLine[1]=e,o.p1Line=e),this.change.push(o)},this))));0==--this.line_count&&this.gameOver()},rollback:function(){if(this.change.length){var t=this.change.pop();t.isFirst?(t.clickedLine.active=!0,this.status=0,t.p0.getComponent("point").relateLine[1]=t.clickedLine,t.p1.getComponent("point").relateLine[0]=t.clickedLine):(t.p0.setPosition(t.p0.getComponent("point").prePos),t.p1.setPosition(t.p1.getComponent("point").prePos),t.p0.active=!0,t.p1.active=!0,t.clickedLine.active=!0,t.newPoint.destroy(),t.p0Line&&(t.p0Line.getComponent("line").relatePoint[1]=t.p0),t.p1Line&&(t.p1Line.getComponent("line").relatePoint[0]=t.p1)),this.isShow&&(this.path.i>this.path.pA.length-1||this.lines[this.path.pA[this.path.i]].getComponent("line").stopShow(),this.lines[this.path.pA[--this.path.i]].getComponent("line").startShow()),this.line_count++}},gameOver:function(){console.log("Game Over")},gameClear:function(){for(var t=this.node.children,e=0;e<t.length;e++)t[e].destroy()},restart:function(t,e,n){if(t.length==e.length){this.gameClear(),this.myParticle=cc.instantiate(this.myParticlePrefab),this.node.addChild(this.myParticle),this.status=0,this.values=[],this.op=[],this.points=[],this.lines=[],this.change=[],this.scale=1,this.path=null;for(var i=e,o=this.line_count=0;o<i.length;o++)"+"==i[o]?this.op.push(0):this.op.push(1);this.isShow=n,this.values=t,i=e,this.path={pA:[],i:0};var s=this.node.getComponent("pg_algori").getMaxValue(this.values,i);console.log("The Max Score is "+s.score);for(o=0;o<s.path.length;o++)s.path[o]-=1;if(this.path.pA=s.path,15<this.values.length?this.drawPointFollowNet():this.drawPointFollowCircle(),this.drawLine(),this.relatePL(),1==this.isShow){for(o=0;o<this.lines.length;o++)this.lines[o].getComponent("line").clickable=0;var a=this.path;a.i=0,this.lines[a.pA[a.i]].getComponent("line").startShow()}this.line_count=this.lines.length}else console.log("顶点数与边数不一致")}}),cc._RF.pop()},{}],line:[function(t,e,n){"use strict";cc._RF.push(e,"04badI9lX1L84aMeoLxigf5","line"),cc.Class({extends:cc.Component,properties:{relatePoint:new Array,op:-1,game:{default:null,serializable:!1},clickable:1,plus_color:{default:new cc.Color(110,110,110),type:cc.Color},pro_color:{default:new cc.Color(255,255,255),type:cc.Color}},start:function(){this.node.on("mousedown",this.myClick,this)},update:function(t){this.drawByRelatePiont()},setOp:function(t){this.op=t,this.node.color=t?this.pro_color:this.plus_color},setRelatePoint_0:function(t){this.relatePoint[0]=t},setRelatePoint_1:function(t){this.relatePoint[1]=p1},setRelatePoint:function(t,e){this.relatePoint[0]=t,this.relatePoint[1]=e},drawByRelatePiont:function(){var t=this.relatePoint;if(t[0]&&t[1]){this.node.setPosition((t[0].x+t[1].x)/2,(t[0].y+t[1].y)/2);var e=t[0].x-t[1].x,n=t[0].y-t[1].y;this.node.rotation=0==e?90:Math.atan(-n/e)/2/Math.PI*360,this.node.width=Math.sqrt(e*e+n*n)}else console.log("miss relate point")},myClick:function(t){this.clickable&&(this.node.active=!1,this.game.processOp(this.node))},flicker:function(){if(this.op)var t=this.pro_color,e=new cc.tintTo(1,t.getR(),t.getG(),t.getB());else{var n=this.plus_color;e=new cc.tintTo(1,n.getR(),n.getG(),n.getB())}this.node.runAction(new cc.repeatForever(new cc.sequence(new cc.tintTo(.3,255,0,0),e)))},stopFlicker:function(){this.node.stopAllActions(),this.op?this.node.color=this.pro_color:this.node.color=this.plus_color},startShow:function(){this.flicker(),this.clickable=1},stopShow:function(){this.stopFlicker(),this.clickable=0}}),cc._RF.pop()},{}],my_camera:[function(t,e,n){"use strict";cc._RF.push(e,"09292MlHapF9pjU7fRwgdq5","my_camera"),cc.Class({extends:cc.Component,properties:{zoomMax:2.5,zoomMin:.3,background:{default:null,type:cc.Node}},start:function(){this.background.on(cc.Node.EventType.MOUSE_WHEEL,function(t){this.getComponent(cc.Camera).zoomRatio+=t.getScrollY()/1200},this),this.background.on(cc.Node.EventType.TOUCH_MOVE,function(t){var e=t.touch.getDelta();this.node.x-=e.x,this.node.y-=e.y},this)}}),cc._RF.pop()},{}],my_silider:[function(t,e,n){"use strict";cc._RF.push(e,"b0682aKGNlGA4vX0gEJsSMl","my_silider"),cc.Class({extends:cc.Component,properties:{camera:{default:null,type:cc.Node}},start:function(){var e=this.camera.getComponent("my_camera"),n=this.camera.getComponent(cc.Camera),i=this.getComponent(cc.Slider),o=i.progress;this.node.on("slide",function(t){i.progress>o?n.zoomRatio=(i.progress-o)/(1-o)*(e.zoomMax-1)+1:n.zoomRatio=1-(o-i.progress)/o*(1-e.zoomMin)},this)}}),cc._RF.pop()},{}],new_confirm_btn:[function(t,e,n){"use strict";cc._RF.push(e,"a2e3f4oDU5MRJlFEUJcv3KC","new_confirm_btn"),cc.Class({extends:cc.Component,properties:{pgInput:{default:null,type:cc.Node},showMode:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},start:function(){this.node.on("mousedown",function(){var t,e,n,i=this.grouping(this.pgInput.getComponent(cc.EditBox).string);n=this.showMode.getComponent(cc.Toggle).isChecked,t=i.digital,(e=i.symbol).unshift(e.pop()),this.game.getComponent("game").restart(t,e,n)},this)},grouping:function(t){for(var e=0,n=0,i=0,o=new Array,s=new Array,a=new Array,c=0;c<t.length;c++){var r=0;if(new RegExp(/[0-9]/).test(t[c]))o[e]=t[c],e++;else if("-"==t[c])i++;else if("+"==t[c]||"*"==t[c]){s[n]=t[c];for(var h=0;h<o.length;h++)r+=o[h]*Math.pow(10,e-1),e--;0!=i?(a.push(-r),n++,i=0):(a.push(r),n++)}}return{digital:a,symbol:s}}}),cc._RF.pop()},{}],new_game_btn:[function(t,e,n){"use strict";cc._RF.push(e,"ad811BS7HBAkIyrmYnXra2N","new_game_btn"),cc.Class({extends:cc.Component,properties:{pgInput:{default:null,type:cc.Node},confirm:{default:null,type:cc.Node},showMode:{default:null,type:cc.Node},randGame:{default:null,type:cc.Node},text0:"new game",text1:"cancel"},start:function(){this.pgInput.active=!1,this.confirm.active=!1,this.showMode.active=!1,this.node.on("mousedown",function(){this.pgInput.active=!this.pgInput.active,this.confirm.active=!this.confirm.active,this.showMode.active=!this.showMode.active,this.randGame.getComponent("rand_game_btn").hideRelate()},this)},hideRelate:function(){this.pgInput.active=!1,this.confirm.active=!1,this.showMode.active=!1}}),cc._RF.pop()},{}],nw_game_btn:[function(t,e,n){"use strict";cc._RF.push(e,"bc246X70Z9EArzmiPmzHt1l","nw_game_btn"),cc.Class({extends:cc.Component,properties:{pgInput:{default:null,type:cc.Node},confirm:{default:null,type:cc.Node},showMode:{default:null,type:cc.Node},randGame:{default:null,type:cc.Node},text0:"new game",text1:"cancel"},start:function(){this.pgInput.active=!1,this.confirm.active=!1,this.showMode.active=!1,this.node.on("mousedown",function(){this.pgInput.active=!this.pgInput.active,this.confirm.active=!this.confirm.active,this.showMode.active=!this.showMode.active,this.randGame.getComponent("rand_game_btn").hideRelate()},this)},hideRelate:function(){this.pgInput.active=!1,this.confirm.active=!1,this.showMode.active=!1}}),cc._RF.pop()},{}],pg_algori:[function(t,e,n){"use strict";cc._RF.push(e,"0b226/K4RpG2ZfKZGMpNVPb","pg_algori"),cc.Class({extends:cc.Component,properties:{},start:function(){},getMaxValue:function(t,e){var s=t,a=e,m=s.length,c=void 0,v=void 0,w=void 0,r=1024,C=[],d=void 0,h=void 0;function l(t,e,n){for(var i=1;i<n;i++){var o=v[e][i][0],s=v[e][i][1],a=e+i;m<a&&(a%=m);var c=v[a][n-i][0],r=v[a][n-i][1],h=void 0,l=void 0;if("+"===w[a])h=s+r,l=o+c;else{var p=new Array(4);p[0]=o*c,p[1]=o*r,p[2]=s*r,p[3]=s*c,l=p[0],h=p[0];for(var u=1;u<4;u++)l>p[u]&&(l=p[u]),h<p[u]&&(h=p[u])}v[e][n][0]>l&&(v[e][n][0]=l),v[e][n][1]<h&&(v[e][n][1]=h,d[e][n]=i)}}return function(){(function(){v=new Array(m+1);for(var t=0;t<=m;t++){v[t]=new Array(m+1);for(var e=0;e<=m;e++)v[t][e]=new Array(2)}d=new Array(m+1);for(var n=0;n<=m;n++)d[n]=new Array(m+1);(c=new Array(m+1))[0]=0,(w=new Array(m+1))[0]=""})();for(var t=1;t<=m;t++)c[t]=s[t-1],w[t]=a[t-1];for(var e=1;e<=m;e++){var n=c[e],i=w[e];v[e][1][0]=Number(n),v[e][1][1]=Number(n);for(var o=2;o<=m;o++)v[e][o][0]=r,v[e][o][1]=-1*r;c[e]=Number(n),w[e]=i}(function(t){var e=void 0,n=void 0;for(n=2;n<=t;n++)for(e=1;e<=t;e++)l(0,e,n);var i=v[1][t][1],o=1;for(e=1;e<=t;e++)i<v[e][t][1]&&(i=v[e][t][1],o=e);d[0][0]=o,function t(e,n,i){if(1!==i)for(var o=1;o<i;o++){var s=v[n][o][0],a=v[n][o][1],c=n+o;m<c&&(c%=m);var r=v[c][i-o][0],h=v[c][i-o][1];if("+"===w[c]){var l=a+h,p=s+r;if(e===l){C.push(c),t(a,n,o),t(h,c,i-o);break}if(e===p){C.push(c),t(s,n,o),t(r,c,i-o);break}}else{var u=s*r,d=s*h,f=a*r,g=a*h;if(e===u){C.push(c),t(s,n,o),t(r,c,i-o);break}if(e===d){C.push(c),t(s,n,o),t(h,c,i-o);break}if(e===f){C.push(c),t(a,n,o),t(r,c,i-o);break}if(e===g){C.push(c),t(a,n,o),t(h,c,i-o);break}}}}(i,o,t),C.push(o),C.reverse(),h={path:C,score:i}})(m)}(),h}}),cc._RF.pop()},{}],point:[function(t,e,n){"use strict";cc._RF.push(e,"2d464AG7DZNnJuKP0C9hzT4","point"),cc.Class({extends:cc.Component,properties:{valueLabel:{default:null,type:cc.Label},relateLine:new Array,val:0,prePos:null},onLoad:function(){this.node.on("mousedown",function(){event.stopPropagation()})},start:function(){this.node.on("touchmove",this.myMove,this.node)},getPrePos:function(){return this.prePos},setValue:function(t){this.val=t,this.valueLabel.string=t.toString()},drawByXY:function(t,e){this.node.setPosition(t,e)},myMove:function(t){t.stopPropagation();var e=t.touch.getDelta();this.x+=e.x,this.y+=e.y}}),cc._RF.pop()},{}],rand_confirm_btn:[function(t,e,n){"use strict";cc._RF.push(e,"53ed3uHwXBDwKo51N8euEsQ","rand_confirm_btn"),cc.Class({extends:cc.Component,properties:{randInput:{default:null,type:cc.Node},showModeRand:{default:null,type:cc.Node},game:{default:null,type:cc.Node}},start:function(){this.node.on("mousedown",function(){var t=parseInt(this.randInput.getComponent(cc.EditBox).string),e=this.showModeRand.getComponent(cc.Toggle).isChecked;if(0<t&&t<150){var n=this.getRandValOp(t);this.game.getComponent("game").restart(n.values,n.ops,e)}else console.log("������࣡")},this)},getRandValOp:function(t){for(var e=[],n=[],i=[],o=0;o<t;o++)e.push(Math.ceil(51*Math.random()-20)),n.push(Math.round(Math.random()));for(o=0;o<t;o++)0==n[o]?i.push("+"):i.push("*");return{values:e,ops:i}}}),cc._RF.pop()},{}],rand_game_btn:[function(t,e,n){"use strict";cc._RF.push(e,"40dc0efvOlIA5tWuLo4NZzN","rand_game_btn"),cc.Class({extends:cc.Component,properties:{randInput:{default:null,type:cc.Node},randConfirm:{default:null,type:cc.Node},showModeRand:{default:null,type:cc.Node},newGame:{default:null,type:cc.Node}},start:function(){this.randInput.active=!1,this.randConfirm.active=!1,this.showModeRand.active=!1,this.node.on("mousedown",function(){this.randInput.active=!this.randInput.active,this.randConfirm.active=!this.randConfirm.active,this.showModeRand.active=!this.showModeRand.active,this.newGame.getComponent("nw_game_btn").hideRelate()},this)},hideRelate:function(){this.randInput.active=!1,this.randConfirm.active=!1,this.showModeRand.active=!1}}),cc._RF.pop()},{}],rollback_btn:[function(t,e,n){"use strict";cc._RF.push(e,"da148uEskJBB6Rjr5ZymdE4","rollback_btn"),cc.Class({extends:cc.Component,properties:{game:{default:null,type:cc.Node}},start:function(){var e=this.game;this.node.on("mousedown",function(t){e.getComponent("game").rollback()})}}),cc._RF.pop()},{}]},{},["game","line","my_camera","my_silider","new_confirm_btn","nw_game_btn","pg_algori","point","rand_confirm_btn","rand_game_btn","rollback_btn","new_game_btn"]);